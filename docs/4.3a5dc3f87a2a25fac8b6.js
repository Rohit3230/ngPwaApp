(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{znA2:function(e,t,i){"use strict";i.r(t),i.d(t,"ResearchModule",function(){return A});var a=i("ofXK"),n=i("tyNb"),r=i("XNiG"),s=i("fXoL");const c=["video"],o=["canvas"];function h(e,t){if(1&e){const e=s.Mb();s.Lb(0,"div",6),s.Sb("click",function(){return s.Zb(e),s.Ub().rotateVideoInput(!0)}),s.Kb()}}class g{constructor(e,t,i){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=t,this._imageAsDataUrl=e,this._imageData=i}static getDataFromDataUrl(e,t){return e.replace(`data:${t};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=g.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}}class d{static getAvailableVideoInputs(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((e,t)=>{navigator.mediaDevices.enumerateDevices().then(t=>{e(t.filter(e=>"videoinput"===e.kind))}).catch(e=>{t(e.message||e)})}):Promise.reject("enumerateDevices() not supported.")}}let b=(()=>{class e{constructor(){this.width=640,this.height=480,this.videoOptions=e.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=e.DEFAULT_IMAGE_TYPE,this.imageQuality=e.DEFAULT_IMAGE_QUALITY,this.imageCapture=new s.n,this.initError=new s.n,this.imageClick=new s.n,this.cameraSwitched=new s.n,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(e){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=e.subscribe(()=>{this.takeSnapshot()})}set switchCamera(e){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=e.subscribe(e=>{"string"==typeof e?this.switchToVideoInput(e):this.rotateVideoInput(!1!==e)})}static getMediaConstraintsForDevice(e,t){const i=t||this.DEFAULT_VIDEO_OPTIONS;return e&&(i.deviceId={exact:e}),i}static getDeviceIdFromMediaStreamTrack(t){if(t.getSettings&&t.getSettings()&&t.getSettings().deviceId)return t.getSettings().deviceId;if(t.getConstraints&&t.getConstraints()&&t.getConstraints().deviceId){const i=t.getConstraints().deviceId;return e.getValueFromConstrainDOMString(i)}}static getFacingModeFromMediaStreamTrack(t){if(t){if(t.getSettings&&t.getSettings()&&t.getSettings().facingMode)return t.getSettings().facingMode;if(t.getConstraints&&t.getConstraints()&&t.getConstraints().facingMode){const i=t.getConstraints().facingMode;return e.getValueFromConstrainDOMString(i)}}}static isUserFacing(t){const i=e.getFacingModeFromMediaStreamTrack(t);return!!i&&"user"===i.toLowerCase()}static getValueFromConstrainDOMString(e){if(e){if(e instanceof String)return String(e);if(Array.isArray(e)&&Array(e).length>0)return String(e[0]);if("object"==typeof e){if(e.exact)return String(e.exact);if(e.ideal)return String(e.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(e=>{this.initError.next({message:e}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){const t=this.nativeVideoElement,i={width:this.width,height:this.height};t.videoWidth&&(i.width=t.videoWidth,i.height=t.videoHeight);const a=this.canvas.nativeElement;a.width=i.width,a.height=i.height;const n=a.getContext("2d");n.drawImage(t,0,0);const r=this.imageType?this.imageType:e.DEFAULT_IMAGE_TYPE,s=a.toDataURL(r,this.imageQuality?this.imageQuality:e.DEFAULT_IMAGE_QUALITY);let c=null;this.captureImageData&&(c=n.getImageData(0,0,a.width,a.height)),this.imageCapture.next(new g(s,r,c))}rotateVideoInput(e){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(e?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}switchToVideoInput(e){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(e,this.videoOptions)}videoResize(){}get videoWidth(){const e=this.getVideoAspectRatio();return Math.min(this.width,this.height*e)}get videoHeight(){const e=this.getVideoAspectRatio();return Math.min(this.height,this.width/e)}get videoStyleClasses(){let e="";return this.isMirrorImage()&&(e+="mirrored "),e.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){const e=this.nativeVideoElement;return e.videoWidth&&e.videoWidth>0&&e.videoHeight&&e.videoHeight>0?e.videoWidth/e.videoHeight:this.width/this.height}initWebcam(t,i){const a=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const n=e.getMediaConstraintsForDevice(t,i);navigator.mediaDevices.getUserMedia({video:n}).then(t=>{this.mediaStream=t,a.srcObject=t,a.play(),this.activeVideoSettings=t.getVideoTracks()[0].getSettings();const i=e.getDeviceIdFromMediaStreamTrack(t.getVideoTracks()[0]);this.cameraSwitched.next(i),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=i?this.availableVideoInputs.findIndex(e=>e.deviceId===i):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(e=>{this.initError.next({message:e.message,mediaStreamError:e})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let e="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?e=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(e=this.mirrorImage.x.toLowerCase())),e){case"always":return!0;case"never":return!1}}return e.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&this.mediaStream.getTracks().forEach(e=>e.stop())}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((e,t)=>{d.getAvailableVideoInputs().then(t=>{this.availableVideoInputs=t,e(t)}).catch(e=>{this.availableVideoInputs=[],t(e)})})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Cb({type:e,selectors:[["webcam"]],viewQuery:function(e,t){if(1&e&&(s.cc(c,!0),s.cc(o,!0)),2&e){let e;s.Yb(e=s.Tb())&&(t.video=e.first),s.Yb(e=s.Tb())&&(t.canvas=e.first)}},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera",mirrorImage:"mirrorImage"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(e,t){1&e&&(s.Lb(0,"div",0),s.Sb("click",function(){return t.imageClick.next()}),s.Lb(1,"video",1,2),s.Sb("resize",function(){return t.videoResize()}),s.Kb(),s.dc(3,h,1,0,"div",3),s.Jb(4,"canvas",4,5),s.Kb()),2&e&&(s.xb(1),s.zb(t.videoStyleClasses),s.Xb("width",t.videoWidth)("height",t.videoHeight),s.xb(2),s.Xb("ngIf",t.allowCameraSwitch&&t.availableVideoInputs.length>1&&t.videoInitialized),s.xb(1),s.Xb("width",t.width)("height",t.height))},directives:[a.j],styles:['.webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;line-height:0;position:relative}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1);background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC");background-position:50%;background-repeat:no-repeat;background-size:80%;border-radius:5px;cursor:pointer;height:48px;position:absolute;right:13px;top:10px;transition:background-color .2s ease;width:48px}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.18)}']}),e.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},e.DEFAULT_IMAGE_TYPE="image/jpeg",e.DEFAULT_IMAGE_QUALITY=.92,e})(),l=(()=>{class e{}return e.\u0275mod=s.Gb({type:e}),e.\u0275inj=s.Fb({factory:function(t){return new(t||e)},imports:[[a.b]]}),e})();var m=i("3Pt+");function u(e,t){if(1&e){const e=s.Mb();s.Lb(0,"webcam",13),s.Sb("imageCapture",function(t){return s.Zb(e),s.Ub().handleImage(t)})("cameraSwitched",function(t){return s.Zb(e),s.Ub().cameraWasSwitched(t)})("initError",function(t){return s.Zb(e),s.Ub().handleInitError(t)}),s.Kb()}if(2&e){const e=s.Ub();s.Xb("height",500)("width",500)("trigger",e.triggerObservable)("allowCameraSwitch",e.allowCameraSwitch)("switchCamera",e.nextWebcamObservable)("videoOptions",e.videoOptions)("imageQuality",1)}}function p(e,t){if(1&e&&(s.Lb(0,"div",14),s.Lb(1,"h2"),s.ec(2,"Nice one!"),s.Kb(),s.Jb(3,"img",15),s.Kb()),2&e){const e=s.Ub();s.xb(3),s.Xb("src",e.webcamImage.imageAsDataUrl,s.ac)}}function v(e,t){1&e&&(s.Lb(0,"h4"),s.ec(1,"Messages:"),s.Kb())}function w(e,t){if(1&e&&(s.Lb(0,"ul"),s.Lb(1,"li"),s.ec(2),s.Vb(3,"json"),s.Kb(),s.Kb()),2&e){const e=t.$implicit;s.xb(2),s.fc(s.Wb(3,1,e))}}const S=[{path:"",component:(()=>{class e{constructor(){this.isCameraOpene=!1,this.showWebcam=!0,this.allowCameraSwitch=!0,this.multipleWebcamsAvailable=!1,this.deviceId="",this.videoOptions={},this.errors=[],this.webcamImage=null,this.trigger=new r.a,this.nextWebcam=new r.a}ngOnInit(){d.getAvailableVideoInputs().then(e=>{this.multipleWebcamsAvailable=e&&e.length>1})}triggerSnapshot(){this.trigger.next()}toggleWebcam(){this.showWebcam=!this.showWebcam}handleInitError(e){this.errors.push(e)}showNextWebcam(e){this.nextWebcam.next(e)}handleImage(e){console.info("received webcam image",e),this.webcamImage=e}cameraWasSwitched(e){console.log("active device: "+e),this.deviceId=e}get triggerObservable(){return this.trigger.asObservable()}get nextWebcamObservable(){return this.nextWebcam.asObservable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Cb({type:e,selectors:[["app-research"]],decls:31,vars:7,consts:[[2,"text-align","center"],[3,"height","width","trigger","allowCameraSwitch","switchCamera","videoOptions","imageQuality","imageCapture","cameraSwitched","initError",4,"ngIf"],[1,"actionBtn",3,"click"],[1,"actionBtn",3,"disabled","click"],["id","cameraSwitchCheckbox","type","checkbox",3,"ngModel","ngModelChange"],["for","cameraSwitchCheckbox"],["id","deviceId","type","text",2,"width","500px",3,"ngModel","ngModelChange"],[3,"click"],["class","snapshot",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"links"],["target","_blank","rel","noopener","href","https://github.com/basst314/ngx-webcam"],[3,"height","width","trigger","allowCameraSwitch","switchCamera","videoOptions","imageQuality","imageCapture","cameraSwitched","initError"],[1,"snapshot"],[3,"src"]],template:function(e,t){1&e&&(s.Lb(0,"div",0),s.Lb(1,"h1"),s.ec(2," Ngx-Webcam Demo "),s.Kb(),s.Lb(3,"div"),s.dc(4,u,1,7,"webcam",1),s.Jb(5,"br"),s.Lb(6,"button",2),s.Sb("click",function(){return t.triggerSnapshot()}),s.ec(7,"Take A Snapshot"),s.Kb(),s.Lb(8,"button",2),s.Sb("click",function(){return t.toggleWebcam()}),s.ec(9,"Toggle Webcam"),s.Kb(),s.Jb(10,"br"),s.Lb(11,"button",3),s.Sb("click",function(){return t.showNextWebcam(!0)}),s.ec(12,"Next Webcam"),s.Kb(),s.Lb(13,"input",4),s.Sb("ngModelChange",function(e){return t.allowCameraSwitch=e}),s.Kb(),s.Lb(14,"label",5),s.ec(15,"Allow Camera Switch"),s.Kb(),s.Jb(16,"br"),s.ec(17," DeviceId: "),s.Lb(18,"input",6),s.Sb("ngModelChange",function(e){return t.deviceId=e}),s.Kb(),s.Lb(19,"button",7),s.Sb("click",function(){return t.showNextWebcam(t.deviceId)}),s.ec(20,"Activate"),s.Kb(),s.Kb(),s.Kb(),s.dc(21,p,4,1,"div",8),s.dc(22,v,2,0,"h4",9),s.dc(23,w,4,3,"ul",10),s.Lb(24,"h2"),s.ec(25,"Like this project on GitHub:"),s.Kb(),s.Lb(26,"ul",11),s.Lb(27,"li"),s.Lb(28,"h2"),s.Lb(29,"a",12),s.ec(30,"Ngx-Webcam / GitHub"),s.Kb(),s.Kb(),s.Kb(),s.Kb()),2&e&&(s.xb(4),s.Xb("ngIf",t.showWebcam),s.xb(7),s.Xb("disabled",!t.multipleWebcamsAvailable),s.xb(2),s.Xb("ngModel",t.allowCameraSwitch),s.xb(5),s.Xb("ngModel",t.deviceId),s.xb(3),s.Xb("ngIf",t.webcamImage),s.xb(1),s.Xb("ngIf",t.errors.length>0),s.xb(1),s.Xb("ngForOf",t.errors))},directives:[a.j,m.a,m.d,m.g,m.b,a.i,b],pipes:[a.e],styles:[""]}),e})()}];let I=(()=>{class e{}return e.\u0275mod=s.Gb({type:e}),e.\u0275inj=s.Fb({factory:function(t){return new(t||e)},imports:[[n.b.forChild(S)],n.b]}),e})(),A=(()=>{class e{}return e.\u0275mod=s.Gb({type:e}),e.\u0275inj=s.Fb({factory:function(t){return new(t||e)},imports:[[a.b,I,l,m.c]]}),e})()}}]);